{%  extends "admin/base_site.html" %}
{% load i18n admin_urls static admin_list tz type_extras %}

{% if not is_popup %}
{% block breadcrumbs %}
<div class="breadcrumbs">
    <a href="{% url 'admin:index' %}">{% trans 'Home' %}</a>
    &rsaquo; <a href="{% url 'admin:app_list' app_label=cl.opts.app_label %}">{{ cl.opts.app_config.verbose_name }}</a>
    &rsaquo; <a href="{% url cl.opts|admin_urlname:'changelist' %}">{{ cl.opts.verbose_name_plural|capfirst }}</a>
    &rsaquo; {{ title|capfirst }}
</div>
{% endblock %}
{% endif %}

{%  block content %}
<table>
    <tr>
        <th>RQJob:</th>
        <td><a href="{{ rqjob.get_absolute_url }}">{{ rqjob }}</a></td>
    </tr>
    <tr>
        <th>Job:</th>
        <td>{{ job }}</td>
    </tr>
    <tr>
        <th>Trigger:</th>
        <td><a href="{{ trigger.get_absolute_url }}">{{ trigger }}</a></td>
    </tr>
    <tr>
        <th>Template:</th>
        <td><a href="{{ template.get_absolute_url }}">{{ template }}</a></td>
    </tr>
    <tr>
        <th colspan="2"><u>Email</u></th>
    </tr>
    <tr>
        <th>To:</th>
        <td>{{ email.to }}</td>
    </tr>
    <tr>
        <th>CC:</th>
        <td>{{ email.cc }}</td>
    </tr>
    <tr>
        <th>BCC:</th>
        <td>{{ email.bcc }}</td>
    </tr>
    <tr>
        <th>Reply-To:</th>
        <td>{{ email.reply_to }}</td>
    </tr>
    <tr>
        <th>From:</th>
        <td>{{ email.from_email }}</td>
    </tr>
    <tr>
        <th>Subject:</th>
        <td>{{ email.subject }}</td>
    </tr>
    <tr>
        <th>Body:</th>
        <td>
            <pre style="word-wrap: normal; white-space: pre-wrap;">{{ email.body }}</pre>
        </td>
    </tr>
    <tr>
        <th>HTML Body:</th>
        <td>
            {{ email.alternatives.0.0 }}
        </td>
    </tr>
    <tr>
        <th>Prepared context:</th>
        <td>
            <table>
            {% for k, v in adn_context.items %}
                <tr>
                    <th><code>{{ k }}</code></th>
                    <td>
                        {% if v|is_model and v.get_absolute_url %}
                        <a href="{{ v.get_absolute_url }}">{{ v }}</a>
                        {% elif v|is_model %}
                        {{ v }}
                        {% elif v|is_str %}
                        <code>{{ v|pprint }}</code>
                        {% elif v|is_iterable %}
                        <ul>
                            {% for vv in v %}
                            <li><code>{{ vv|pprint }}</code></li>
                            {% endfor %}
                        </ul>
                        {% endif %}
                    </td>
                </tr>
            {% endfor %}
            </table>
        </td>
    </tr>
</table>

{% endblock %}
